{"version":3,"sources":["todolist.js"],"names":["$","mode","newTaskCount","parseInt","localStorage","getItem","tasksData","JSON","parse","tasksSort","on","removeClass","addClass","data","taskLists","show","filter","hide","not","fadeOut","next","slideDown","closest","find","val","prev","e","stopPropagation","file","files","info","text","name","Date","toDateString","getTaskContent","setItem","preventDefault","siblings","removeAttr","slideUp","prop","id","task","i","taskIndex","indexOf","is","isCompleted","stringify","renderTask","sortIndex","isStar","unshift","splice","sortable","opacity","items","map","get","btn","panel","undefined","title","date","time","fileTime","comment","push","template","leftTaskCount","each","html","click"],"mappings":"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","file":"todolist.js","sourcesContent":["$(function(){\r\n  let mode = 'all';\r\n  let newTaskCount = parseInt(localStorage.getItem('newTaskCount')) || 0;\r\n  let tasksData = JSON.parse(localStorage.getItem('data')) || [];\r\n  let tasksSort = JSON.parse(localStorage.getItem('sort')) || [];\r\n\r\n  //header mode toggle\r\n  $('header .nav_list').on('click', function(){\r\n    $('header .nav_list').removeClass('active');\r\n    $(this).addClass('active');\r\n    mode = $(this).data('mode');\r\n    const taskLists = $('.task_lists .task_panel');\r\n    switch(mode){\r\n      case 'all':\r\n        taskLists.show('fast');\r\n        break;\r\n      case 'progress':\r\n        taskLists.show();\r\n        taskLists.filter('.completed').hide('fast');\r\n        break;\r\n      case 'completed':\r\n        taskLists.show();\r\n        taskLists.not('.completed').hide('fast');\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n\r\n  //open add new task panel\r\n  $('.addTask_input').on('click', function(){\r\n    $(this).fadeOut(50);\r\n    $(this).next('.task_panel').slideDown('slow');\r\n  });\r\n\r\n  //cancel add new task panel\r\n  $('.btn_cancel').on('click', function(){\r\n    $(this).closest('.task_panel').find('input, textarea').val('');\r\n    $(this).closest('.task_panel').find('.file_info').addClass('d_none');\r\n    $(this).closest('.task_panel').hide().prev('.addTask_input').show();\r\n  });\r\n\r\n  //input file onchange listener\r\n  $('.container').on('change', '[id^=task_file]', function(e){\r\n    e.stopPropagation();\r\n    let file = $(this)[0].files[0];\r\n    let info = $(this).closest('.d_flex').find('.file_info');\r\n    info.removeClass('d_none').find('.name').text(file.name);\r\n    info.find('.upload').text((new Date()).toDateString());\r\n  });\r\n\r\n  //add new task\r\n  $('#js_addTask').on('click', function(){\r\n    getTaskContent($(this));\r\n    $(this).closest('.task_panel').find('input, textarea').val('');\r\n    $(this).closest('.task_panel').find('.file_info').addClass('d_none');\r\n    $(this).closest('.task_panel').hide().prev('.addTask_input').show();\r\n    //keep task id increase\r\n    newTaskCount++;\r\n    localStorage.setItem('newTaskCount',newTaskCount);\r\n  });\r\n\r\n  //edit task\r\n  $('.task_lists').on('click', '.edit_btn', function(e){\r\n    e.preventDefault();\r\n    $(this).addClass('active').closest('.task_panel').find('.task_panel_bottom').slideDown().removeClass('d_none');\r\n    $(this).siblings('.title_input').removeAttr('disabled');\r\n  });\r\n\r\n  //cancel edit task\r\n  $('.task_lists').on('click', '.btn_cancel', function(){\r\n    $(this).closest('.task_panel_bottom').slideUp().addClass('d_none').prev('.task_panel_top').find('.edit_btn').removeClass('active').siblings('.title_input').prop('disabled',true);\r\n  });\r\n\r\n  //save edit task\r\n  $('.task_lists').on('click', '[id^=\"js_saveTask\"]', function(){\r\n    getTaskContent($(this));\r\n    $(this).closest('.task_panel_bottom').slideUp().addClass('d_none').prev('.task_panel_top').find('.edit_btn').removeClass('active').siblings('.title_input').prop('disabled',true);\r\n  });\r\n\r\n  //task completed check listener\r\n  $('.task_lists').on('click', '.completed_check', function(){\r\n    //find task by task id, then use task to find the position of taskData\r\n    let id = $(this).closest('.task_panel').data('id');\r\n    let task = tasksData.find(function(task, i){return task.id == id;});\r\n    let taskIndex = tasksData.indexOf(task);\r\n    $(this).is('.checked')? tasksData[taskIndex].isCompleted = false:tasksData[taskIndex].isCompleted = true;\r\n    $(this).is('.checked')? $(this).removeClass('checked'):$(this).addClass('checked');\r\n    localStorage.setItem('data', JSON.stringify(tasksData));\r\n    renderTask();\r\n  });\r\n\r\n  //task star check listener\r\n  $('.task_lists').on('click', '.star_check', function(){\r\n    let id = $(this).closest('.task_panel').data('id');\r\n    let sortIndex = tasksSort.indexOf(id);\r\n    let task = tasksData.find(function(task, i){return task.id == id;});\r\n    let taskIndex = tasksData.indexOf(task);\r\n    $(this).is('.checked')? tasksData[taskIndex].isStar = false:tasksData[taskIndex].isStar = true;\r\n    $(this).is('.checked')? $(this).removeClass('checked'):$(this).addClass('checked');\r\n    //let stared task move to top\r\n    if($(this).is('.checked')){\r\n      tasksSort.unshift(tasksSort.splice(sortIndex,1)[0]);\r\n      localStorage.setItem('sort', JSON.stringify(tasksSort));\r\n    }\r\n    localStorage.setItem('data', JSON.stringify(tasksData));  \r\n    renderTask();\r\n  });\r\n\r\n  //task delete listener\r\n  $('.task_lists').on('click', '.delete_btn', function(){\r\n    let id = $(this).closest('.task_panel').data('id');\r\n    let task = tasksData.find(function(task, i){return task.id == id;});\r\n    let taskIndex = tasksData.indexOf(task);\r\n    //delete task from taskData\r\n    tasksData.splice(taskIndex,1);\r\n    localStorage.setItem('data', JSON.stringify(tasksData));\r\n    let sortIndex = tasksSort.indexOf(id);\r\n    //delete task id from taskSort\r\n    tasksSort.splice(sortIndex,1);\r\n    localStorage.setItem('sort', JSON.stringify(tasksSort));\r\n    $(this).closest('.task_panel').fadeOut(function(){renderTask();});\r\n  });\r\n\r\n  //sortable tasklists\r\n  $(\".task_lists\").sortable({\r\n    opacity: 0.5,\r\n    items: \".task_panel:not(.star)\"\r\n  });\r\n  $(\".task_lists\").on(\"sortupdate\", function(){\r\n    tasksSort = $(this).find('.task_panel').map(function(i,task){\r\n      return $(task).data('id');\r\n    }).get();\r\n    localStorage.setItem('sort', JSON.stringify(tasksSort));\r\n  });\r\n\r\n\r\n  function getTaskContent(btn){\r\n    let panel = btn.closest('.task_panel');\r\n    let data = {\r\n      id: panel.data('id') === undefined? newTaskCount:panel.data('id'),\r\n      title: panel.find('.title_input').val(),\r\n      date: panel.find('[name=\"task_date\"]').val(),\r\n      time: panel.find('[name=\"task_time\"]').val(),\r\n      file: panel.find('[name=\"task_file\"]')[0].files[0] || '',\r\n      fileTime: panel.find('.file_info .upload').text() || '',\r\n      comment: panel.find('[name=\"task_comment\"]').val(),\r\n      isStar: panel.find('[name=\"completed_check\"]').prop('checked'),\r\n      isCompleted: panel.find('[name=\"star_check\"]').prop('checked')\r\n    }\r\n    // console.log(data);\r\n    //if add task...\r\n    if(data.id == newTaskCount){\r\n      tasksData.push(data);\r\n      tasksSort.push(data.id);\r\n    }else{\r\n      //if update task...\r\n      let task = tasksData.find(function(task,i){\r\n        return task.id == data.id;\r\n      });\r\n      let taskIndex = tasksData.indexOf(task);\r\n      tasksData[taskIndex] = data;\r\n    }\r\n    localStorage.setItem('data', JSON.stringify(tasksData));\r\n    localStorage.setItem('sort', JSON.stringify(tasksSort));\r\n    renderTask();\r\n  }\r\n\r\n  function renderTask(){\r\n    let template = '';\r\n    let leftTaskCount = 0;\r\n    $.each(tasksSort, function(i, id){\r\n      let task = tasksData.find(function(task, i){\r\n        return task.id == id;\r\n      });\r\n      if(!task.isCompleted){\r\n        leftTaskCount++;\r\n      }\r\n      template += `\r\n        <div data-id=\"${task.id}\" class=\"task_panel ${task.isStar? 'star': ''} ${task.isCompleted? 'completed': ''}\">\r\n          <a href=\"#\" class=\"delete_btn\"><i class=\"fas fa-trash-alt\"></i></a>\r\n          <div class=\"task_panel_top\">\r\n            <div class=\"d_flex\">\r\n              <input type=\"checkbox\" name=\"completed_check\" class=\"completed_check ${task.isCompleted? 'checked':''}\"/>\r\n              <input type=\"text\" placeholder=\"Type Something Here...\" name=\"title_input\" disabled=\"true\" value=\"${task.title}\" class=\"title_input\"/>\r\n              <input type=\"checkbox\" name=\"star_check\" class=\"star_check ${task.isStar? 'checked':''}\"/><a href=\"#\" class=\"edit_btn\"><i class=\"fas fa-pencil-alt\"></i></a>\r\n            </div>\r\n            <div class=\"task_icons d_flex\">\r\n              <li class=\"icon_date ${task.date? '':'d_none'}\"><i class=\"far fa-calendar-alt\"></i><span style=\"margin-left:5px\">${task.date}</span></li>\r\n              <li class=\"icon_file ml-1 ${task.file? '':'d_none'}\"><i class=\"far fa-file\"></i></li>\r\n              <li class=\"icon_comment ml-1 ${task.comment? '':'d_none'}\"><i class=\"far fa-comment-dots\"></i></li>\r\n            </div>\r\n          </div>\r\n          <div class=\"task_panel_bottom d_none\">\r\n            <div class=\"form_group\">\r\n              <h4><i class=\"far fa-calendar-alt\"></i>Deadline</h4>\r\n              <input type=\"date\" placeholder=\"yyyy/mm/dd\" name=\"task_date\" class=\"ml-1\" value=\"${task.date}\"/>\r\n              <input type=\"time\" placeholder=\"hh:mm\" style=\"margin-left:5px\" name=\"task_time\" value=\"${task.time}\"/>\r\n            </div>\r\n            <div class=\"form_group\">\r\n              <h4><i class=\"far fa-file\"></i>File</h4>\r\n              <div class=\"d_flex\">\r\n                <div class=\"file_info ml-1 ${task.file? '':'d_none'}\">\r\n                  <p class=\"name\">${task.file? task.file.name:''}</p>\r\n                  <p class=\"upload\">${task.file? task.fileTime:''}</p>\r\n                </div>\r\n                <label for=\"task_file${task.id}\" class=\"file_btn ml-1\">\r\n                  <input id=\"task_file${task.id}\" type=\"file\" name=\"task_file\" hidden=\"hidden\"/>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div class=\"form_group\">\r\n              <h4><i class=\"far fa-comment-dots\"></i>Comment</h4>\r\n              <textarea name=\"task_comment\" rows=\"6\" placeholder=\"Type Your Memo Here...\" class=\"ml-1\">${task.comment}</textarea>\r\n            </div>\r\n            <div class=\"button_group\">\r\n              <button class=\"btn_cancel\">X Cancel</button>\r\n              <button id=\"js_saveTask${task.id}\" class=\"btn_primary\">+ Save</button>\r\n            </div>\r\n          </div>\r\n        </div>`;\r\n    });\r\n    $('.task_lists').html(template).hide();\r\n    $('.task_left_info').html(leftTaskCount+' tasks left');\r\n    //check mode to display\r\n    $('header .nav_list').filter('.active').click();\r\n    $('.task_lists').show();\r\n  }\r\n\r\n  renderTask();\r\n});"]}