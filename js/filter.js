"use strict";$(function(){var i=new Vue({el:"#app",data:{loading:!0,listsData:[],pageData:[],pagination:[],currentPage:1,filterMode:!1,filterData:[],filterInputData:{LocName:"",City:"",District:"",AvailableTime:!1},filterOpen:!1,modalLocName:"",googleMap:{map:{},marker:{},infowindow:{}}},computed:{showPages:function(){var e={min:this.currentPage%10==0?this.currentPage-9:10*Math.floor(this.currentPage/10)+1,max:this.currentPage%10==0?this.currentPage:10*Math.ceil(this.currentPage/10)};return e.max>this.pagination.length&&(e.max=this.pagination.length),this.pagination.filter(function(t,a){return t>=e.min-1&&t<=e.max-1})},getCity:function(){return this.listsData.map(function(t,a){return JSON.parse(t.City).List[1].Value}).filter(function(t,a,e){return e.indexOf(t)==a})},getDistrict:function(){var e=this.filterInputData.City;if(""==e)return"";var i=[];return this.listsData.forEach(function(t,a){JSON.parse(t.City).List[1].Value==e&&i.push(JSON.parse(t.District).List[1].Value)}),i.filter(function(t,a,e){return e.indexOf(t)==a})}},methods:{getAPIData:function(){axios.get("https://wapi.gogoro.com/tw/api/vm/list").then(function(t){i.listsData=t.data.data,i.combineDataByPages()}).catch(function(t){alert("資料載入有誤，請稍後再試! error: "+t)})},combineDataByPages:function(){for(var t=JSON.parse(JSON.stringify(i.listsData)),a=t.length%20==0?t.length/20:parseInt(t.length/20)+1,e=0;e<a;e++)this.pageData.push(t.splice(0,20)),i.pagination.push(e);this.loading=!1},movePage:function(t){"prev"==t?this.currentPage--:"next"==t?this.currentPage++:this.currentPage=parseInt(t)},showMap:function(t){this.modalLocName=JSON.parse(t.LocName).List[1].Value;var a={lat:t.Latitude,lng:t.Longitude},e=JSON.parse(t.Address).List[1].Value.replace(/\(.+\)/g,""),i="\n          <div>\n            <h5>"+JSON.parse(t.LocName).List[1].Value+"</h5>\n            <p>\n              <a href='https://www.google.com/maps/place/"+e+"' target='_blank'>\n                "+JSON.parse(t.Address).List[1].Value+"\n              </a>\n            </p>\n          </div>\n        ";this.googleMap.map=new google.maps.Map(document.getElementById("map"),{center:a,zoom:15}),this.googleMap.marker=new google.maps.Marker({position:a,map:this.googleMap.map,icon:"https://raw.githubusercontent.com/kakadodo/theF2EChallange/gh-pages/img/week2/battery-icon.png",animation:google.maps.Animation.DROP}),this.googleMap.infowindow=new google.maps.InfoWindow({content:i}),this.googleMap.infowindow.open(this.googleMap.map,this.googleMap.marker)},filterLists:function(){var i=this;""==this.filterInputData.LocName&&""==this.filterInputData.City&&""==this.filterInputData.District&&0==this.filterInputData.AvailableTime?this.filterMode=!1:this.filterMode=!0;function t(e){""!==i.filterInputData[e]&&"AvailableTime"!==e&&(a=a.filter(function(t,a){return"LocName"==e?-1!==JSON.parse(t[e]).List[1].Value.toLowerCase().indexOf(i.filterInputData[e].toLowerCase()):JSON.parse(t[e]).List[1].Value==i.filterInputData[e]})),"AvailableTime"==e&&i.filterInputData[e]&&(a=a.filter(function(t,a){return"24HR"==t[e]}))}var a=JSON.parse(JSON.stringify(this.listsData));for(var e in this.filterInputData)t(e);this.filterData=a.filter(function(t,a){return!0})}},watch:{"filterInputData.LocName":function(t){this.debounce(t)},"filterInputData.City":function(t){this.filterInputData.District="",i.filterLists()},"filterInputData.AvailableTime":function(t,a){t!==a&&i.filterLists()}},created:function(){this.debounce=_.debounce(this.filterLists,500)},mounted:function(){this.getAPIData()}})});
//# sourceMappingURL=filter.js.map
