{"version":3,"sources":["crypto-pay.js"],"names":["vm","formProfile","name","mobile","email","date","nop","adult","child","code","comment","agree","formPayment","cardNumber","expiredMonth","expiredYear","cvv","$","Vue","use","VeeValidate","classes","classNames","valid","invalid","el","data","progress","steps","currentStep","profile","payby","payment","formPayby","hideOrder","computed","methods","validateBeforeSubmit","stepName","$validator","validateAll","then","result","removeClass","addClass","setTimeout","resetForm","formName","JSON","parse","stringify","reset","checkCardNumberInput","number","index","length","$refs","focus","resetAllStep","console","log","key","initFormData","created","extend","validate","mounted","timer","window","on","width","clearTimeout","animate","top","scrollTop"],"mappings":"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","file":"crypto-pay.js","sourcesContent":["let vm = null;\nconst formProfile = {\n  name: null,\n  mobile: null,\n  email: null,\n  date: '2019/08/09',\n  nop: {\n    adult: 0,\n    child: 0,\n  },\n  code: null,\n  comment: null,\n  agree: false,\n};\nconst formPayment = {\n  name: null,\n  cardNumber: ['', '', '', ''],\n  expiredMonth: null,\n  expiredYear: null,\n  cvv: null,\n};\n\n$(function() {\n  // 表單驗證 plugin\n  Vue.use(VeeValidate, {\n    classes: true,\n    classNames: {\n      valid: 'is-valid',\n      invalid: 'is-invalid',\n    }\n  });\n  vm = new Vue({\n    el: '#app',\n    data: {\n      progress: {\n        steps: ['profile', 'payby', 'payment'],\n        currentStep: 0,\n        profile: false,\n        payby: false,\n        payment: false,\n      },\n      payby: ['超商代碼 7-11', 'ATM轉帳', '街口支付', '信用卡', 'LINE Pay'],\n      formProfile: null,\n      formPayby: null,\n      formPayment: null,\n      hideOrder: true,\n    },\n    computed: {\n    },\n    methods: {\n      validateBeforeSubmit(stepName) {\n        this.$validator.validateAll().then((result) => {\n          if (result) {\n            this.progress[stepName] = true;\n            this.progress.currentStep++;\n            return;\n          }\n          if (stepName === 'payby') {\n            $('.alert_payby').removeClass('hide').addClass('show');\n            setTimeout(() => {\n              $('.alert_payby').removeClass('show').addClass('hide');\n            }, 2000);\n          }\n        });\n      },\n      resetForm(formName) {\n        switch(formName) {\n          case 'formProfile':\n            this.formProfile = JSON.parse(JSON.stringify(formProfile));\n            this.$validator.reset();\n            return;\n          case 'formPayby':\n            this.formPayby = null;\n            this.progress.profile = false;\n            this.progress.currentStep--;\n            return;\n          case 'formPayment':\n            this.formPayment = JSON.parse(JSON.stringify(formPayment));\n            this.progress.payby = false;\n            this.progress.currentStep--;\n            return;\n          default:\n            return;\n        }\n      },\n      checkCardNumberInput(number, index) {\n        if (number.length===4 && index<3) {\n          this.$refs.cardNumber[index+1].focus();\n        }\n      },\n      resetAllStep() {\n        console.log('work');\n        for (let key in this.progress) {\n          if (key === 'steps') continue;\n          if (key === 'currentStep') {\n            this.progress[key] = 0;\n            continue;\n          }\n          this.progress[key] = false;\n        }\n        this.initFormData();\n      },\n      initFormData() {\n        this.formProfile = JSON.parse(JSON.stringify(formProfile));\n        this.formPayby = null;\n        this.formPayment = JSON.parse(JSON.stringify(formPayment));\n      },\n    },\n    created() {\n      // 參加人數的客製化驗證\n      this.$validator.extend('nop', {\n        validate: () => {\n          return this.formProfile.nop.adult + this.formProfile.nop.child > 0;\n        }\n      });\n      this.initFormData();\n    },\n    mounted() {\n      let timer = null;\n      $(window).on('scroll', function(){\n        if ($(window).width() <= 767) {\n          clearTimeout(timer);\n          timer = setTimeout(() => {\n            $('.popup_wrapper').animate({\n              top: $(window).scrollTop(),\n            }, 300);\n          }, 100);\n        }\n      });\n    },\n  });\n});"]}