{"version":3,"sources":["free-cell.js"],"names":["vm","Vue","el","data","gameTime","timer","isPlaying","showModal","panelCode","options","success","fail","currentPanel","deckHolder","deckDone","deckUnorder","ignoreCardId","ondragCardId","ondragDeckName","ondragDeckIndex","ondropDeckName","ondropDeckIndex","returnSteps","computed","displayTime","minute","Math","floor","toString","padStart","second","methods","shuffle","arr","i","length","j","random","generateRandomCards","cardArr","Array","from","map","card","index","shuffleCards","forEach","cardId","indexOf","splice","push","shift","findCardPattern","ceil","displayCardParttern","deckIndex","cardNumber","cardPattern","ondragStart","deckName","ondragEnter","e","preventDefault","ondragEnd","pop","doneDeck","lastDoneDeckCardId","dropUnorderDeck","lastUnorderDeckCardId","dragUnorderDeck","dragCardColorIndex","unorderDeckCardColorIndex","numberCompare","startGame","switchPanel","countTime","pauseGame","continueGame","restartGame","resetAllData","setTimeout","clearInterval","returnGameSteps","alert","lastStep","setInterval","config","aniCardEnter","delay","dataset","style","animationDelay","classList","add","handleAnimationEnd","remove","removeEventListener","addEventListener","created"],"mappings":"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","file":"free-cell.js","sourcesContent":["/**\r\n * 牌號規則\r\n * 愛心 - 1~13\r\n * 梅花 - 14~26\r\n * 黑桃 - 27~39\r\n * 方塊 - 40~52\r\n*/\r\nconst vm = new Vue({\r\n  el: '#app',\r\n  data: {\r\n    gameTime: 1000*60*1,\r\n    timer: null,\r\n    isPlaying: false,\r\n    showModal: true,\r\n    panelCode: {\r\n      options: 1,\r\n      success: 2,\r\n      fail: 3,\r\n    },\r\n    currentPanel: 0,\r\n    deckHolder: [0, 0, 0, 0],\r\n    deckDone: [[1], [14], [27], [40]],\r\n    deckUnorder: [[], [], [], [], [], [], [], []],\r\n    ignoreCardId: [1, 14, 27, 40],\r\n    ondragCardId: null,\r\n    ondragDeckName: null,\r\n    ondragDeckIndex: null,\r\n    ondropDeckName: null,\r\n    ondropDeckIndex: null,\r\n    returnSteps: [],\r\n  },\r\n  computed: {\r\n    displayTime() {\r\n      const minute = Math.floor(this.gameTime/1000/60).toString().padStart(2,0);\r\n      const second = Math.floor((this.gameTime - minute*60*1000)/1000).toString().padStart(2,0);\r\n      return `${minute}:${second}`;\r\n    },\r\n  },\r\n  methods: {\r\n    shuffle(arr) {\r\n      for(let i = arr.length - 1; i >= 0; i--) {\r\n        let j = Math.floor(Math.random() * (i + 1));\r\n        [arr[i], arr[j]] = [arr[j], arr[i]];\r\n      }\r\n      return arr;\r\n    },\r\n    generateRandomCards() {\r\n      const cardArr = Array.from(new Array(52))\r\n        .map((card, index) => index + 1);\r\n      const shuffleCards = this.shuffle(cardArr);\r\n      this.ignoreCardId.forEach((cardId, i) => {\r\n        if (shuffleCards.indexOf(cardId) !== -1) {\r\n          shuffleCards.splice(shuffleCards.indexOf(cardId), 1);\r\n        }\r\n      });\r\n      for(let i = 0; i < this.deckUnorder.length; i++) {\r\n        for(let j = 0; j < 6; j++) {\r\n          this.deckUnorder[i].push(shuffleCards.shift());\r\n        }\r\n      }\r\n    },\r\n    findCardPattern(cardId) {\r\n      const index = Math.ceil(cardId / 13);\r\n      switch (index) {\r\n        case 1:\r\n          return 'heart';\r\n        case 2:\r\n          return 'club';\r\n        case 3:\r\n          return 'spade';\r\n        case 4:\r\n          return 'diamond';\r\n        default:\r\n          return;\r\n      }\r\n    },\r\n    displayCardParttern(cardId, deckIndex) {\r\n      let cardNumber = cardId % 13;\r\n      if (cardNumber === 0) cardNumber = 13;\r\n      const cardPattern = this.findCardPattern(cardId);\r\n      return `./img/2nd-week2/${cardPattern}-${cardNumber}.png`;\r\n    },\r\n    ondragStart(cardId, deckIndex, deckName) {\r\n      // 清空上一回的 drop 內容\r\n      this.ondropDeckName = null;\r\n      this.ondropDeckIndex = null;\r\n      this.ondragCardId = cardId;\r\n      this.ondragDeckIndex = deckIndex;\r\n      this.ondragDeckName = deckName;\r\n      // console.log('ondragStart');\r\n    },\r\n    ondragEnter(e, deckIndex, deckName) {\r\n      e.preventDefault();\r\n      this.ondropDeckName = deckName;\r\n      this.ondropDeckIndex = deckIndex;\r\n      // console.log(this.ondropDeckName, this.ondropDeckIndex);\r\n      // console.log('ondragEnter');\r\n    },\r\n    ondragEnd(e, cardId, deckIndex) {\r\n      e.preventDefault();\r\n      // 狀況一: unorder 移動到 holder\r\n      if (this.ondropDeckName === 'deckHolder') {\r\n        if (this.deckHolder[this.ondropDeckIndex] !== 0) return;\r\n        this.deckHolder.splice(this.ondropDeckIndex, 1, this.ondragCardId);\r\n        this.deckUnorder[this.ondragDeckIndex].pop();\r\n      }\r\n      // 狀況二: unorder 或 holder 移動到 done\r\n      else if (this.ondropDeckName === 'deckDone') {\r\n        const doneDeck = this.deckDone[this.ondropDeckIndex];\r\n        const lastDoneDeckCardId = doneDeck[doneDeck.length - 1];\r\n        if (this.ondragCardId !== lastDoneDeckCardId + 1) return;\r\n        doneDeck.push(this.ondragCardId);\r\n        if (this.ondragDeckName === 'deckHolder') {\r\n          this[this.ondragDeckName].pop();\r\n        } else {\r\n          this[this.ondragDeckName][this.ondragDeckIndex].pop();\r\n        }\r\n      }\r\n      // 狀況三: unorder 移動到 unorder\r\n      else if (this.ondropDeckName === 'deckUnorder') {\r\n        const dropUnorderDeck = this.deckUnorder[this.ondropDeckIndex];\r\n        const lastUnorderDeckCardId = dropUnorderDeck[dropUnorderDeck.length - 1];\r\n        const dragUnorderDeck = this.deckUnorder[this.ondragDeckIndex];\r\n        // 比對大小及顏色\r\n        const dragCardColorIndex = Math.ceil(this.ondragCardId / 13);\r\n        const unorderDeckCardColorIndex = Math.ceil(lastUnorderDeckCardId / 13);\r\n        const numberCompare = (this.ondragCardId % 13) === (lastUnorderDeckCardId % 13) - 1 || (this.ondragCardId % 13) === (lastUnorderDeckCardId % 13) + 12;\r\n        if ( (dragCardColorIndex + unorderDeckCardColorIndex !== 5)\r\n          && dragCardColorIndex !== unorderDeckCardColorIndex\r\n          && numberCompare ) {\r\n          dropUnorderDeck.push(this.ondragCardId);\r\n          dragUnorderDeck.pop();\r\n        }\r\n      }\r\n      this.returnSteps.push({\r\n        ondragCardId: this.ondragCardId,\r\n        ondragDeckName: this.ondragDeckName,\r\n        ondragDeckIndex: this.ondragDeckIndex,\r\n        ondropDeckName: this.ondropDeckName,\r\n        ondropDeckIndex: this.ondropDeckIndex,\r\n      });\r\n    },\r\n    startGame() {\r\n      this.switchPanel({\r\n        isPlaying: true,\r\n        showModal: false,\r\n      });\r\n      this.countTime();\r\n    },\r\n    pauseGame() {\r\n      this.switchPanel({\r\n        isPlaying: false,\r\n        showModal: true,\r\n        currentPanel: this.panelCode.options,\r\n      });\r\n    },\r\n    continueGame() {\r\n      this.switchPanel({\r\n        isPlaying: true,\r\n        showModal: false,\r\n      });\r\n    },\r\n    restartGame() {\r\n      this.resetAllData();\r\n      setTimeout(() => {\r\n        this.generateRandomCards();\r\n      }, 400);\r\n      this.countTime();\r\n      this.showModal = false;\r\n      this.isPlaying = true;\r\n    },\r\n    resetAllData() {\r\n      this.gameTime = 1000*60*30;\r\n      this.deckHolder = [0, 0, 0, 0];\r\n      this.deckDone = [[1], [14], [27], [40]];\r\n      this.deckUnorder = [[], [], [], [], [], [], [], []];\r\n      this.ondragCardId = null;\r\n      this.ondragDeckIndex = null;\r\n      this.ondropDeckName = null;\r\n      this.ondropDeckIndex = null;\r\n      this.returnSteps = [];\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n    },\r\n    returnGameSteps() {\r\n      if (this.returnSteps.length === 0) {\r\n        alert('No more step return.');\r\n      } else {\r\n        const lastStep = this.returnSteps.pop();\r\n        if (lastStep.ondragDeckName === 'deckHolder') {\r\n          this[lastStep.ondragDeckName].splice(lastStep.ondragDeckIndex, 1, lastStep[ondragCardId]);\r\n        } else {\r\n          this[lastStep.ondragDeckName][lastStep.ondragDeckIndex].push(lastStep.ondragCardId);\r\n        }\r\n        if (lastStep.ondropDeckName === 'deckHolder') {\r\n          this[lastStep.ondropDeckName].splice(lastStep.ondropDeckIndex, 1, 0);\r\n        } else {\r\n          this[lastStep.ondropDeckName][lastStep.ondropDeckIndex].pop();\r\n        }\r\n      }\r\n    },\r\n    countTime() {\r\n      this.timer = setInterval(() => {\r\n        if (this.gameTime <= 0) {\r\n          this.switchPanel({\r\n            isPlaying: false,\r\n            showModal: true,\r\n            currentPanel: this.panelCode.fail\r\n          });\r\n          clearInterval(this.timer);\r\n          return;\r\n        }\r\n        if (this.isPlaying) {\r\n          this.gameTime -= 1000;\r\n        }\r\n      }, 1000);\r\n    },\r\n    switchPanel(config) {\r\n      this.currentPanel = config.currentPanel || 0;\r\n      this.isPlaying = config.isPlaying;\r\n      this.showModal = config.showModal;\r\n    },\r\n    aniCardEnter(el) {\r\n      const delay = el.dataset.index * 100;\r\n      el.style.animationDelay = `${delay/1000}s`;\r\n      el.classList.add('animated', 'fadeInUp');\r\n      function handleAnimationEnd() {\r\n        el.classList.remove('animated', 'fadeInUp');\r\n        el.removeEventListener('animationend', handleAnimationEnd);\r\n      }\r\n      el.addEventListener('animationend', handleAnimationEnd);\r\n    },\r\n  },\r\n  created() {\r\n    // 產生隨機 unorder 牌組\r\n    this.generateRandomCards();\r\n  }\r\n});"]}