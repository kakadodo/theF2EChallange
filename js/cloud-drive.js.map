{"version":3,"sources":["cloud-drive.js"],"names":["vm","projectData","$","Vue","el","data","currentDriveTarget","modalTodo","addProject","title","name","addFile","colorTag","type","addFolder","currentModalTodo","searchMode","isSearch","searchInput","searchContent","searchResult","computed","getCurrentDrivePath","pathStr","parent","parentId","forEach","pid","index","getProject","children","find","folder","id","methods","changeCurrentDriveTarget","target","showColorTag","color","showTypeIcon","backToParent","toggleMarkBox","isMarkBoxOpen","setColorTag","intoFolder","project","showModal","todo","modal","addColorTag","addFileType","resetModalData","modalData","key","submitModalData","push","Date","getTime","parentIdArr","getSearchResult","tempArr","loopChildColor","child","subChild","loopChildText","indexOf","created"],"mappings":"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","file":"cloud-drive.js","sourcesContent":["let vm = null;\r\nconst projectData = [\r\n  {\r\n    \"id\": 1,\r\n    \"type\": \"project\",\r\n    \"name\": \"工作\",\r\n    \"children\": [\r\n      {\r\n        \"id\": 11,\r\n        \"type\": \"folder\",\r\n        \"parentId\": [\r\n          1\r\n        ],\r\n        \"name\": \"老闆給的\",\r\n        \"colorTag\": \"red\",\r\n        \"isMarkBoxOpen\": false,\r\n        \"children\": [\r\n          {\r\n            \"id\": 111,\r\n            \"type\": \"img\",\r\n            \"parentId\": [\r\n              11\r\n            ],\r\n            \"name\": \"螢幕截圖\",\r\n            \"colorTag\": \"orange\",\r\n            \"isMarkBoxOpen\": false\r\n          },\r\n          {\r\n            \"id\": 112,\r\n            \"type\": \"pdf\",\r\n            \"parentId\": [\r\n              11\r\n            ],\r\n            \"name\": \"後端 API 串接說明\",\r\n            \"colorTag\": \"purple\",\r\n            \"isMarkBoxOpen\": false\r\n          },\r\n          {\r\n            \"id\": 113,\r\n            \"type\": \"folder\",\r\n            \"parentId\": [\r\n              1,\r\n              11\r\n            ],\r\n            \"name\": \"巢狀資料夾\",\r\n            \"colorTag\": \"red\",\r\n            \"isMarkBoxOpen\": false,\r\n            \"children\": [\r\n              {\r\n                \"id\": 1131,\r\n                \"type\": \"img\",\r\n                \"parentId\": [\r\n                  113\r\n                ],\r\n                \"name\": \"另一個螢幕截圖\",\r\n                \"colorTag\": \"orange\",\r\n                \"isMarkBoxOpen\": false\r\n              },\r\n              {\r\n                \"id\": 1132,\r\n                \"type\": \"pdf\",\r\n                \"parentId\": [\r\n                  113\r\n                ],\r\n                \"name\": \"另一個後端 API 串接說明\",\r\n                \"colorTag\": \"purple\",\r\n                \"isMarkBoxOpen\": false\r\n              },\r\n              {\r\n                \"id\": 1567352504087,\r\n                \"type\": \"folder\",\r\n                \"children\": [\r\n                  {\r\n                    \"id\": 1567352520733,\r\n                    \"type\": \"pdf\",\r\n                    \"name\": \"巢到爆的PDF檔\",\r\n                    \"colorTag\": null,\r\n                    \"parentId\": 1567352504087,\r\n                    \"isMarkBoxOpen\": false\r\n                  },\r\n                  {\r\n                    \"id\": 1567352534492,\r\n                    \"type\": \"img\",\r\n                    \"name\": \"巢到爆的JPG\",\r\n                    \"colorTag\": null,\r\n                    \"parentId\": 1567352504087,\r\n                    \"isMarkBoxOpen\": false\r\n                  }\r\n                ],\r\n                \"name\": \"巢到爆\",\r\n                \"colorTag\": \"red\",\r\n                \"parentId\": [\r\n                  1,\r\n                  11,\r\n                  113\r\n                ],\r\n                \"isMarkBoxOpen\": false\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"id\": 12,\r\n        \"type\": \"word\",\r\n        \"parentType\": \"project\",\r\n        \"parentId\": [\r\n          1\r\n        ],\r\n        \"name\": \"工作排程表\",\r\n        \"colorTag\": \"\",\r\n        \"isMarkBoxOpen\": false\r\n      },\r\n      {\r\n        \"id\": 13,\r\n        \"type\": \"folder\",\r\n        \"parentType\": \"project\",\r\n        \"parentId\": [\r\n          1\r\n        ],\r\n        \"name\": \"已完成專案\",\r\n        \"colorTag\": \"green\",\r\n        \"isMarkBoxOpen\": false,\r\n        \"children\": [\r\n          {\r\n            \"id\": 131,\r\n            \"type\": \"word\",\r\n            \"parentId\": [\r\n              13\r\n            ],\r\n            \"name\": \"會議記錄\",\r\n            \"colorTag\": \"red\",\r\n            \"isMarkBoxOpen\": false\r\n          },\r\n          {\r\n            \"id\": 132,\r\n            \"type\": \"pdf\",\r\n            \"parentId\": [\r\n              13\r\n            ],\r\n            \"name\": \"作品整理\",\r\n            \"colorTag\": \"purple\",\r\n            \"isMarkBoxOpen\": false\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    \"id\": 2,\r\n    \"type\": \"project\",\r\n    \"name\": \"宜蘭出遊\",\r\n    \"children\": [\r\n      {\r\n        \"id\": 22,\r\n        \"type\": \"folder\",\r\n        \"parentId\": [\r\n          2\r\n        ],\r\n        \"name\": \"行前準備\",\r\n        \"colorTag\": \"orange\",\r\n        \"isMarkBoxOpen\": false,\r\n        \"children\": [\r\n          {\r\n            \"id\": 222,\r\n            \"type\": \"word\",\r\n            \"parentId\": [\r\n              22\r\n            ],\r\n            \"name\": \"兩天行程表\",\r\n            \"colorTag\": \"green\",\r\n            \"isMarkBoxOpen\": false\r\n          },\r\n          {\r\n            \"id\": 223,\r\n            \"type\": \"mp4\",\r\n            \"parentId\": [\r\n              22\r\n            ],\r\n            \"name\": \"狼人殺教學影片\",\r\n            \"colorTag\": \"purple\",\r\n            \"isMarkBoxOpen\": false\r\n          },\r\n          {\r\n            \"id\": 224,\r\n            \"type\": \"word\",\r\n            \"parentId\": [\r\n              22\r\n            ],\r\n            \"name\": \"行李清單\",\r\n            \"colorTag\": \"green\",\r\n            \"isMarkBoxOpen\": false\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"id\": 23,\r\n        \"type\": \"img\",\r\n        \"parentType\": \"project\",\r\n        \"parentId\": [\r\n          2\r\n        ],\r\n        \"name\": \"獨木舟\",\r\n        \"colorTag\": \"\",\r\n        \"isMarkBoxOpen\": false\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n$(function () {\r\n  vm = new Vue({\r\n    el: \"#app\",\r\n    data: {\r\n      projectData: null,\r\n      currentDriveTarget: null,\r\n      modalTodo: {\r\n        addProject: {\r\n          title: '新增專案目錄',\r\n          name: null,\r\n        },\r\n        addFile: {\r\n          title: '新增檔案',\r\n          name: null,\r\n          colorTag: null,\r\n          type: null,\r\n        },\r\n        addFolder: {\r\n          title: '新增資料夾',\r\n          name: null,\r\n          colorTag: null,\r\n        }\r\n      },\r\n      currentModalTodo: 'addProject',\r\n      searchMode: {\r\n        isSearch: false,\r\n        searchInput: null,\r\n        searchContent: null,\r\n        searchResult: null,\r\n      }\r\n    },\r\n    computed: {\r\n      getCurrentDrivePath() {\r\n        let pathStr;\r\n        if (this.currentDriveTarget.type === 'project') {\r\n          pathStr = this.currentDriveTarget.name;\r\n        } else {\r\n          let parent;\r\n          this.currentDriveTarget.parentId.forEach((pid, index) => {\r\n            if (index === 0) {\r\n              parent = this.getProject(pid);\r\n              pathStr = parent.name;\r\n            } else {\r\n              parent = parent.children.find((folder) => {\r\n                return folder.id === pid;\r\n              });\r\n              pathStr += `/${parent.name}`;\r\n            }\r\n          });\r\n          pathStr = `${pathStr}/${this.currentDriveTarget.name}`;\r\n        }\r\n        return pathStr;\r\n      }\r\n    },\r\n    methods: {\r\n      changeCurrentDriveTarget(target) {\r\n        this.currentDriveTarget = target;\r\n        this.searchMode.isSearch = false;\r\n      },\r\n      showColorTag(color) {\r\n        if (!color) return;\r\n        return color;\r\n      },\r\n      showTypeIcon(type) {\r\n        switch (type) {\r\n          case 'folder':\r\n            return 'fa-folder-open';\r\n          case 'img':\r\n            return 'fa-image';\r\n          case 'mp4':\r\n            return 'fa-play-circle';\r\n          case 'word':\r\n            return 'fa-file-word';\r\n          case 'pdf':\r\n            return 'fa-file-pdf';\r\n          default: return;\r\n        }\r\n      },\r\n      backToParent() {\r\n        let parent;\r\n        this.currentDriveTarget.parentId.forEach((pid, index) => {\r\n          if (index === 0) {\r\n            parent = this.getProject(pid);\r\n          } else {\r\n            parent = parent.children.find((folder) => {\r\n              return folder.id === pid;\r\n            });\r\n          }\r\n        });\r\n        this.currentDriveTarget = parent;\r\n      },\r\n      toggleMarkBox(target) {\r\n        target.isMarkBoxOpen = !target.isMarkBoxOpen;\r\n      },\r\n      setColorTag(color, target) {\r\n        target.colorTag = color;\r\n        target.isMarkBoxOpen = false;\r\n      },\r\n      intoFolder(target) {\r\n        if (target.type !== 'folder') return;\r\n        this.currentDriveTarget = target;\r\n        this.searchMode.isSearch = false;\r\n      },\r\n      getProject(id) {\r\n        return this.projectData.find((project) => {\r\n          return project.id === id;\r\n        });\r\n      },\r\n      showModal(todo) {\r\n        switch (todo) {\r\n          case 'addProject':\r\n            this.currentModalTodo = 'addProject';\r\n            break;\r\n          case 'addFile':\r\n            this.currentModalTodo = 'addFile';\r\n            break;\r\n          case 'addFolder':\r\n            this.currentModalTodo = 'addFolder';\r\n            break;\r\n          default: return;\r\n        }\r\n        $('#modal').modal('show');\r\n      },\r\n      addColorTag(color) {\r\n        this.modalTodo[this.currentModalTodo].colorTag = color;\r\n      },\r\n      addFileType(type) {\r\n        this.modalTodo[this.currentModalTodo].type = type;\r\n      },\r\n      resetModalData() {\r\n        const modalData = this.modalTodo[this.currentModalTodo];\r\n        for (const key in modalData) {\r\n          if (key !== 'title') {\r\n            modalData[key] = null;\r\n          }\r\n        }\r\n        $('#modal').modal('hide');\r\n      },\r\n      submitModalData() {\r\n        switch (this.currentModalTodo) {\r\n          case 'addProject':\r\n            if (!this.modalTodo[this.currentModalTodo].name) return;\r\n            this.projectData.push({\r\n              id: new Date().getTime(),\r\n              type: 'project',\r\n              children: [],\r\n              name: this.modalTodo[this.currentModalTodo].name,\r\n            });\r\n            break;\r\n          case 'addFile':\r\n            if (!this.modalTodo[this.currentModalTodo].name || !this.modalTodo[this.currentModalTodo].type) return;\r\n            this.currentDriveTarget.children.push({\r\n              id: new Date().getTime(),\r\n              type: this.modalTodo[this.currentModalTodo].type,\r\n              name: this.modalTodo[this.currentModalTodo].name,\r\n              colorTag: this.modalTodo[this.currentModalTodo].colorTag,\r\n              parentId: this.currentDriveTarget.id,\r\n              isMarkBoxOpen: false,\r\n            });\r\n            break;\r\n          case 'addFolder':\r\n            if (!this.modalTodo[this.currentModalTodo].name) return;\r\n            const parentIdArr = this.currentDriveTarget.parentId ? [...this.currentDriveTarget.parentId, this.currentDriveTarget.id]\r\n              : [this.currentDriveTarget.id];\r\n            this.currentDriveTarget.children.push({\r\n              id: new Date().getTime(),\r\n              type: 'folder',\r\n              children: [],\r\n              name: this.modalTodo[this.currentModalTodo].name,\r\n              colorTag: this.modalTodo[this.currentModalTodo].colorTag,\r\n              parentId: parentIdArr,\r\n              isMarkBoxOpen: false,\r\n            });\r\n            break;\r\n          default: return;\r\n        }\r\n        this.resetModalData();\r\n      },\r\n      getSearchResult(color) {\r\n        let tempArr = [];\r\n        const loopChildColor = (child) => {\r\n          // 跑沒有 children 的子層\r\n          if (!child.children && child.colorTag === color) {\r\n            tempArr.push(child);\r\n          }\r\n          // 跑有子層的 folder 及它子層的 loop\r\n          if (child.type === 'folder' && child.children) {\r\n            if (child.colorTag === color) {\r\n              tempArr.push(child);\r\n            }\r\n            child.children.forEach((subChild) => {\r\n              loopChildColor(subChild);\r\n            });\r\n          }\r\n        }\r\n        const loopChildText = (child) => {\r\n          // 跑沒有 children 的子層\r\n          if (!child.children && child.name.indexOf(this.searchMode.searchInput) !== -1) {\r\n            tempArr.push(child);\r\n          }\r\n          // 跑有子層的 folder 及它子層的 loop\r\n          if (child.type === 'folder' && child.children) {\r\n            if (child.name.indexOf(this.searchMode.searchInput) !== -1) {\r\n              tempArr.push(child);\r\n            }\r\n            child.children.forEach((subChild) => {\r\n              loopChildText(subChild);\r\n            });\r\n          }\r\n        }\r\n        if (color) {\r\n          // 搜尋符合的顏色標籤\r\n          this.projectData.forEach((project) => {\r\n            project.children.forEach((child) => {\r\n              loopChildColor(child);\r\n            });\r\n          });\r\n          this.searchMode.searchContent = `${color} tag`;\r\n        }\r\n        else {\r\n          // 搜尋關鍵字\r\n          if (!this.searchMode.searchInput) return;\r\n          this.projectData.forEach((project) => {\r\n            project.children.forEach((child) => {\r\n              loopChildText(child);\r\n            });\r\n          });\r\n          this.searchMode.searchContent = this.searchMode.searchInput;\r\n          this.searchMode.searchInput = '';\r\n        }\r\n        this.searchMode.searchResult = tempArr;\r\n        this.searchMode.isSearch = true;\r\n      },\r\n    },\r\n    created() {\r\n      this.projectData = projectData;\r\n      this.currentDriveTarget = this.projectData[0];\r\n    }\r\n  });\r\n});\r\n"]}