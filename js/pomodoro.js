"use strict";$(function(){var o={work:{name:"work",time:25,color:"#FF4384"},break:{name:"break",time:5,color:"#00A7FF"}};new Vue({el:"#app",data:{mode:o.work.name,isPlaying:!1,dueTime:60*o.work.time*1e3,totalTime:o.work.time,timer:null,todoInput:"",todoLists:[{id:1,title:"完成第一關番茄鐘",finished:!1,pomodoroCount:2},{id:2,title:"日用品採買",finished:!1,pomodoroCount:0},{id:3,title:"整理房間",finished:!1,pomodoroCount:0},{id:4,title:"修理椅子",finished:!0,pomodoroCount:4},{id:5,title:"洗衣服",finished:!0,pomodoroCount:3},{id:6,title:"曬衣服",finished:!1,pomodoroCount:0}],playingPieChart:null,playingPieConfig:{},displayPieChart:null,isModalShow:!1,currentDetailModal:1,ringTone:{work:"clown_horn",break:"pastoral"}},computed:{playingList:function(){return this.todoLists.filter(function(i){return!i.finished})[0]},queueLists:function(){return this.todoLists.filter(function(i){return!i.finished}).slice(1,4)},undoLists:function(){return this.todoLists.filter(function(i){return!i.finished})},doneLists:function(){return this.todoLists.filter(function(i){return i.finished})},modeBgClass:function(){switch(this.mode){case"work":return"bg_work";case"break":return"bg_break"}},modeDisplayPieClass:function(){return{pie_work:this.mode===o.work.name,pie_break:this.mode===o.break.name,pie_playing:this.isPlaying}},modePlayBtnClass:function(){return{work:this.mode===o.work.name,break:this.mode===o.break.name,playing:this.isPlaying}},displayDueTime:function(){var i=Math.floor(this.dueTime/1e3/60).toString().padStart(2,0);return i+":"+Math.floor((this.dueTime-60*i*1e3)/1e3).toString().padStart(2,0)}},methods:{addTodo:function(){var i=this.todoInput.trim();i&&(this.todoLists.push({id:Date.now(),title:i,finished:!1,pomodoroCount:0}),this.todoInput="")},switchPlayingTodo:function(t){var i=this.todoLists.findIndex(function(i){return i.id===t.id});this.todoLists.splice(i,1),this.todoLists.unshift(t)},createPlayingPie:function(){var i=$(".js_playing_pie");this.playingPieChart=new Chart(i,this.playingPieConfig)},createDisplayPie:function(){var i=$(".js_display_pie");this.playingPieConfig={type:"pie",data:{datasets:[{data:[0,this.totalTime],borderColor:o[this.mode].color,backgroundColor:[o[this.mode].color,"transparent"]}]}},this.displayPieChart=new Chart(i,this.playingPieConfig)},createChartBar:function(){var e=this,i=$(".js_chart_bar");this.chartBarConfig={type:"bar",data:{labels:["7/1","7/2","7/3","7/4","7/5","7/6","7/7"],datasets:[{label:"FOCUS TIME",data:[5,10,10,6,7,9,13],backgroundColor:[]}]},options:{legend:{display:!1},scales:{yAxes:[{gridLines:{display:!1,color:"#fff"},ticks:{fontColor:"#fff",min:0}}],xAxes:[{gridLines:{display:!1,color:"#fff"},ticks:{fontColor:"#fff"}}]}}};var t=this.chartBarConfig.data.labels.map(function(i,t){return t==e.chartBarConfig.data.labels.length-1?o.work.color:"#fff"});this.chartBarConfig.data.datasets[0].backgroundColor=t,this.chartBarChart&&(this.chartBarChart.destroy(),this.chartBarChart=null),this.chartBarChart=new Chart(i,this.chartBarConfig)},switchCountdown:function(){var t=this;if(this.isPlaying||this.timer)this.isPlaying&&this.timer?this.isPlaying=!1:this.isPlaying=!0;else{$("#js_ring_"+this.ringTone[this.mode])[0].pause(),$("#js_ring_"+this.ringTone[this.mode])[0].currentTime=0,this.mode===o.work.name&&this.createPlayingPie(),this.isPlaying=!0;var e=0;this.timer=setInterval(function(){if(t.dueTime<=0&&("none"!==t.ringTone[t.mode]&&$("#js_ring_"+t.ringTone[t.mode])[0].play(),t.clearCountdown(),t.mode===o.work.name&&t.todoLists[0].pomodoroCount++),t.isPlaying){t.dueTime-=1e3,e+=1;var i=t.playingPieConfig.data.datasets[0].data;Math.floor(e/60)!==i[0]&&(i[0]=Math.floor(e/60),i[1]=t.totalTime-i[0],t.mode===o.work.name&&t.playingPieChart.update(),t.displayPieChart.update())}},1e3)}},clearCountdown:function(){switch(clearInterval(this.timer),this.timer=null,this.isPlaying=!1,this.mode){case"work":this.dueTime=60*o.work.time*1e3,this.totalTime=o.work.time;break;case"break":this.dueTime=60*o.break.time*1e3,this.totalTime=o.break.time}this.playingPieChart&&(this.playingPieChart.destroy(),this.playingPieChart=null),this.displayPieChart&&(this.displayPieChart.destroy(),this.displayPieChart=null),this.createDisplayPie()},switchMode:function(){switch(this.mode){case"work":this.mode=o.break.name;break;case"break":this.mode=o.work.name}this.clearCountdown()},showModal:function(i){this.currentDetailModal=i,this.isModalShow=!0},backToPlaying:function(){this.isModalShow=!1,this.mode!==o.work.name&&this.switchMode()}},watch:{currentDetailModal:function(i){var t=this;2==i&&setTimeout(function(){t.createChartBar()},1500)}},mounted:function(){this.createDisplayPie()}})});
//# sourceMappingURL=pomodoro.js.map
