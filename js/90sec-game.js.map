{"version":3,"sources":["90sec-game.js"],"names":["game","emitter","controller","alignGrid","GameModal","_classCallCheck","this","gameDueTime","isPlay","duckMoveSpeed","objSpeed","fireBallTime","isSuperDuck","Controller","on","setDuckMoveSpeed","restartGame","speed","modal","scene","start","uiConfig","gridColWidth","gridColHeight","gameTime","WebFont","load","google","families","canvasBgColor","physics","default","arcade","debug","fontFamily","Scale","FIT","Phaser","CENTER_BOTH","SceneLoad","SceneStart","Game","config","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","Scene","backgroundColor","width","height","fontSize","parent","setOrigin","mode","onProgress","image","spritesheet","frameWidth","frameHeight","progressText","color","Events","EventEmitter","add","text","stroke","strokeThickness","shadow","offsetY","title","duck","sprite","key","blur","fill","frameRate","repeat","anims","create","FlatButton","frames","frame","x","startGame","val","setText","Math","floor","y","input","keyboard","world","setBounds","cameras","main","AlignGrid","rows","cols","bgMiddle","tileSprite","bgBottom","Wall","cursors","origin","bgTop","gridConfig","group","setCollideWorldBounds","setSize","time","addEvent","callback","checkCountDownTimer","callbackScope","createTimeBoxCon","placeAt","btnRight","collider","ballGroup","hitTheBall","bind","superStarGroup","hitTheSuperStar","btnLeft","tilePositionY","isDown","body","velocity","setFrame","right","boss1","setActive","setVisible","boss2","ball","destroy","star","children","iterate","countDueTimer","elapsedTime","timeText","countDownText","hitTheBoss","delay","checkCountDueTimer","second","minute","toString","length","tweens","duration","remove","countDownTimer","fireSuperStar","fireBall","createGoal","becomeSuperTimer","getRepeatCount","fireBoss1","timeBox","fillRoundedRect","subTimeText","endGame","timeBoxCon","play","setScale","graphics","opacity","targets","scale","fillStyle","setTimeout","btnText","gameSuccess","container","i","gameOverScreen","goal","amount","setVelocityY","randomDirection","setVelocityX","setBounceX","_this3","random","getFirstDead","getRandomColumn","superStar","subTitle","boss","stop","GameOverScreen","killSprite","alpha","onComplete","_this4","groupName","getChildren","child","checkBecomeSuperTimer","map","_this5","btn","event","cursor","setInteractive","onPointerdown","onPointerup","existing","GameObjects","Container","emit","_this6","wall","fillRect","_this7","clear3","clear1","clear2","btnRestart","row","cw","ch","lineStyle","moveTo","lineTo","strokePath","obj","xx","yy","index","show","count","j","numText","max","min"],"mappings":"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","file":"90sec-game.js","sourcesContent":["let game, emitter, controller, alignGrid;\n// store game data\nclass GameModal {\n  constructor() {\n    this.gameDueTime = 0;\n    this.isPlay = false;\n    this.duckMoveSpeed = 150;\n    this.objSpeed = 150;\n    this.fireBallTime = 3;\n    this.isSuperDuck = false;\n  }\n}\n// emitter controler\nclass Controller {\n  constructor() {\n    emitter.on(\"setDuckMoveSpeed\", this.setDuckMoveSpeed);\n    emitter.on(\"restartGame\", this.restartGame);\n  }\n  setDuckMoveSpeed(speed) {\n    modal.duckMoveSpeed = speed;\n  }\n  restartGame() {\n    modal.gameDueTime = 0;\n    modal.isPlay = false;\n    modal.duckMoveSpeed = 150;\n    modal.objSpeed = 100;\n    modal.fireBallTime = 3;\n    modal.isSuperDuck = false;\n    game.scene.start(\"SceneStart\", true);\n  }\n}\nconst modal = new GameModal();\nconst uiConfig = {\n  canvasBgColor: \"0x000000\",\n  fontFamily: \"Roboto, 'Microsoft JhengHei'\",\n  gridColWidth: 75,\n  gridColHeight: 150,\n  gameTime: 90\n};\n\nwindow.onload = function () {\n  WebFont.load({\n    google: {\n      families: [\"Roboto\"]\n    }\n  });\n  // Phaser game config\n  const config = {\n    type: Phaser.AUTO,\n    width: 1200,\n    height: 900,\n    backgroundColor: uiConfig.canvasBgColor,\n    physics: {\n      default: \"arcade\",\n      arcade: {\n        debug: false\n      }\n    },\n    parent: \"game\",\n    scale: {\n      parent: \"game\",\n      mode: Phaser.Scale.FIT,\n      autoCenter: Phaser.Scale.CENTER_BOTH,\n      width: 1200,\n      height: 900\n    },\n    scene: [SceneLoad, SceneStart]\n  };\n\n  game = new Phaser.Game(config);\n};\n\nclass SceneLoad extends Phaser.Scene {\n  constructor() {\n    super(\"SceneLoad\");\n  }\n  preload() {\n    // progress bar event listener\n    this.progressText = this.add.text(\n      game.config.width / 2,\n      game.config.height / 2,\n      \"0%\", {\n        color: \"#ffffff\",\n        fontFamily: uiConfig.fontFamily,\n        fontSize: game.config.width / 40\n      }\n    );\n    this.progressText.setOrigin(0.5);\n    this.load.on(\"progress\", this.onProgress, this);\n    // 場景加載的資源\n    this.load.image(\"bgTop\", \"./img/2nd-week5/bg_top.png\");\n    this.load.image(\"bgMiddle\", \"./img/2nd-week5/bg_middle.png\");\n    this.load.image(\"bgBottom\", \"./img/2nd-week5/bg_bottom.png\");\n    this.load.image(\"boss1\", \"./img/2nd-week5/boss1.png\");\n    this.load.image(\"boss2\", \"./img/2nd-week5/boss2.png\");\n    this.load.image(\"goal\", \"./img/2nd-week5/goal.png\");\n    this.load.image(\"superStar\", \"./img/2nd-week5/superStar.png\");\n    this.load.spritesheet(\"ballSprite\", \"./img/2nd-week5/ball_sprite.png\", {\n      frameWidth: 110,\n      frameHeight: 110\n    });\n    this.load.spritesheet(\"duckSprite\", \"./img/2nd-week5/duck_sprite.png\", {\n      frameWidth: 124,\n      frameHeight: 150\n    });\n    this.load.spritesheet(\n      \"btnLeftSprite\",\n      \"./img/2nd-week5/btnLeft_sprite.png\", {\n        frameWidth: 50,\n        frameHeight: 55\n      }\n    );\n    this.load.spritesheet(\n      \"btnRightSprite\",\n      \"./img/2nd-week5/btnRight_sprite.png\", {\n        frameWidth: 50,\n        frameHeight: 55\n      }\n    );\n    this.load.spritesheet(\"btnStart\", \"./img/2nd-week5/btnStart_sprite.png\", {\n      frameWidth: 150,\n      frameHeight: 55\n    });\n    this.load.spritesheet(\"clearSprite\", \"./img/2nd-week5/clear_sprite.png\", {\n      frameWidth: 190,\n      frameHeight: 155\n    });\n  }\n  create() {\n    // create event emitter\n    emitter = new Phaser.Events.EventEmitter();\n    // create emitter controler\n    controller = new Controller();\n    this.title = this.add.text(\n      game.config.width / 2,\n      game.config.height / 2 - 250,\n      \"90sec Game\", {\n        color: \"#FDD23F\",\n        stroke: \"#F49C24\",\n        strokeThickness: 6,\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 72,\n        shadow: {\n          color: \"#9A7B5D\",\n          blur: 2,\n          fill: true,\n          offsetY: 5\n        }\n      }\n    );\n    this.title.setOrigin(0.5);\n    this.duck = this.add.sprite(\n      game.config.width / 2,\n      game.config.height / 2 - 110,\n      \"duckSprite\"\n    );\n    this.anims.create({\n      key: \"walk\",\n      frames: [{\n        key: \"duckSprite\",\n        frame: 0\n      },\n      {\n        key: \"duckSprite\",\n        frame: 1\n      },\n      {\n        key: \"duckSprite\",\n        frame: 2\n      }\n      ],\n      frameRate: 8,\n      repeat: -1\n    });\n    this.duck.play(\"walk\");\n    this.btnStart = new FlatButton({\n      scene: this,\n      key: \"btnStart\",\n      text: \"開始遊戲\",\n      x: game.config.width / 2,\n      y: game.config.height / 2 + 100,\n      event: \"startGame\"\n    });\n    emitter.on(\"startGame\", this.startGame, this);\n  }\n  onProgress(val) {\n    this.progressText.setText(Math.floor(val * 100) + \"%\");\n  }\n  startGame() {\n    this.scene.start(\"SceneStart\");\n  }\n}\n\nclass SceneStart extends Phaser.Scene {\n  constructor() {\n    super(\"SceneStart\");\n  }\n  init() {\n    this.cursors = this.input.keyboard.createCursorKeys();\n    // 限制邊界在池塘中\n    this.physics.world.setBounds(\n      uiConfig.gridColWidth * 3,\n      - uiConfig.gridColHeight * 5,\n      uiConfig.gridColWidth * 10,\n      uiConfig.gridColHeight * 15\n    );\n    this.cameras.main.setBounds(0, 0, game.config.width, game.config.height);\n  }\n  create() {\n    // gridSystem\n    var gridConfig = {\n      rows: 6,\n      cols: 16,\n      scene: this\n    };\n    alignGrid = new AlignGrid(gridConfig);\n\n    // create game objects\n    this.bgMiddle = this.add.tileSprite(\n      game.config.width / 2,\n      game.config.height / 2,\n      game.config.width,\n      game.config.height,\n      \"bgMiddle\"\n    );\n    this.bgBottom = new Wall({\n      scene: this,\n      x: game.config.width / 2,\n      y: game.config.height - 121,\n      key: \"bgBottom\",\n      origin: {\n        x: 0.5,\n        y: 0\n      }\n    });\n    this.bgTop = new Wall({\n      scene: this,\n      x: game.config.width / 2,\n      y: -121,\n      key: \"bgTop\",\n      origin: {\n        x: 0.5,\n        y: 0\n      }\n    });\n\n    this.ballGroup = this.physics.add.group();\n    this.superStarGroup = this.physics.add.group();\n\n    this.duck = this.physics.add.sprite(\n      game.config.width / 2,\n      game.config.height / 2 - 110,\n      \"duckSprite\"\n    );\n    this.duck.setCollideWorldBounds(true);\n    this.duck.setImmovable(true);\n    this.duck.setSize(60, 120);\n    this.anims.create({\n      key: \"swim\",\n      frames: [{\n        key: \"duckSprite\",\n        frame: 0\n      },\n      {\n        key: \"duckSprite\",\n        frame: 1\n      },\n      {\n        key: \"duckSprite\",\n        frame: 2\n      }\n      ],\n      frameRate: 5,\n      repeat: -1\n    });\n    this.duck.play(\"swim\");\n    this.anims.create({\n      key: \"rush\",\n      frames: [{\n        key: \"duckSprite\",\n        frame: 3\n      },\n      {\n        key: \"duckSprite\",\n        frame: 4\n      },\n      {\n        key: \"duckSprite\",\n        frame: 5\n      }\n      ],\n      frameRate: 8,\n      repeat: -1\n    });\n\n    this.createTimeBoxCon();\n\n    // alignGrid.showNumbers();\n    alignGrid.placeAt(7, 4, this.duck);\n\n    // set Timer\n    this.countDownTimer = this.time.addEvent({\n      delay: 1000,\n      callback: this.checkCountDownTimer,\n      callbackScope: this,\n      repeat: 3\n    });\n\n    this.btnLeft = this.add.sprite(\n      game.config.width - 200,\n      game.config.height - 100,\n      \"btnLeftSprite\"\n    );\n\n    this.btnRight = this.add.sprite(\n      game.config.width - 145,\n      game.config.height - 100,\n      \"btnRightSprite\"\n    );\n\n    this.physics.add.collider(\n      this.ballGroup\n    );\n    this.physics.add.collider(\n      this.duck,\n      this.ballGroup,\n      this.hitTheBall.bind(this)\n    );\n    this.physics.add.collider(\n      this.ballGroup,\n      this.superStarGroup,\n    );\n    this.physics.add.overlap(\n      this.duck,\n      this.superStarGroup,\n      this.hitTheSuperStar.bind(this)\n    );\n  }\n  update() {\n    if (modal.isPlay) {\n      if (modal.isSuperDuck) {\n        this.bgMiddle.tilePositionY -= 0.02 * modal.objSpeed;\n      } else {\n        this.bgMiddle.tilePositionY -= 0.005 * modal.objSpeed;\n      }\n      this.duck.body.velocity.x = 0;\n      if (this.cursors.left.isDown) {\n        this.duck.body.velocity.x = -modal.duckMoveSpeed;\n        this.btnLeft.setFrame(1);\n        this.btnLeft.y = game.config.height - 95;\n      } else if (this.cursors.right.isDown) {\n        this.duck.body.velocity.x = modal.duckMoveSpeed;\n        this.btnRight.setFrame(1);\n        this.btnRight.y = game.config.height - 95;\n      } else {\n        this.btnLeft.setFrame(0);\n        this.btnRight.setFrame(0);\n        this.btnLeft.y = game.config.height - 100;\n        this.btnRight.y = game.config.height - 100;\n      }\n      if (\n        this.boss1 &&\n        this.boss1.y > game.config.height + this.boss1.height / 2\n      ) {\n        this.boss1.setActive(false);\n        this.boss1.setVisible(false);\n        this.boss1.destroy();\n      }\n      if (\n        this.boss2 &&\n        this.boss2.y > game.config.height + this.boss2.height / 2\n      ) {\n        this.boss2.setActive(false);\n        this.boss2.setVisible(false);\n        this.boss2.destroy();\n      }\n      this.ballGroup.children.iterate(function (ball) {\n        if (ball && ball.y > game.config.height + ball.height / 2) {\n          ball.setActive(false);\n          ball.setVisible(false);\n          ball.destroy();\n        }\n      }, this);\n      this.superStarGroup.children.iterate(function (star) {\n        if (star && star.y > game.config.height + star.height / 2) {\n          star.setActive(false);\n          star.setVisible(false);\n          star.destroy();\n        }\n      }, this);\n\n      // physics collider\n      this.physics.add.collider(\n        this.ballGroup,\n        this.boss1,\n      );\n      this.physics.add.collider(\n        this.ballGroup,\n        this.boss2,\n      );\n      this.physics.add.collider(\n        this.duck,\n        this.boss1,\n        this.hitTheBoss.bind(this)\n      );\n      this.physics.add.collider(\n        this.duck,\n        this.boss2,\n        this.hitTheBoss.bind(this)\n      );\n    }\n  }\n  checkGameTime() {\n    if (this.countDueTimer) {\n      const elapsedTime = uiConfig.gameTime - modal.gameDueTime;\n      if (elapsedTime >= 0) {\n        let minute = \"0\" + Math.floor(elapsedTime / 60);\n        let second = (elapsedTime - minute * 60).toString();\n        second = second.length === 2 ? second : \"0\" + second;\n        this.timeText.setText(`${minute}:${second}`);\n      } else {\n        this.countDueTimer.remove();\n        modal.isPlay = false;\n      }\n    }\n  }\n  checkCountDownTimer() {\n    if (this.countDownText) {\n      this.countDownText.destroy();\n    }\n    this.countDownText = this.add.text(\n      game.config.width / 2,\n      game.config.height / 2,\n      this.countDownTimer.getRepeatCount(), {\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 150\n      }\n    );\n    this.countDownText.setOrigin(0.5);\n    if (this.countDownTimer.getRepeatCount() === 0) {\n      this.countDownText.destroy();\n      this.countDueTimer = this.time.addEvent({\n        delay: 1000,\n        callback: this.checkCountDueTimer,\n        callbackScope: this,\n        repeat: uiConfig.gameTime\n      });\n      modal.isPlay = true;\n      this.tweens.add({\n        targets: this.bgBottom,\n        duration: 1000,\n        y: game.config.height\n      });\n      this.fireBall();\n    }\n  }\n  checkCountDueTimer() {\n    if (modal.isPlay) {\n      // console.log(this.ballGroup.getChildren());\n      modal.gameDueTime++;\n      if (modal.gameDueTime % 20 === 0) {\n        modal.objSpeed += 50;\n      }\n      if (\n        modal.gameDueTime % modal.fireBallTime === 0 &&\n        modal.gameDueTime < 80\n      ) {\n        this.fireBall();\n      }\n      if (modal.gameDueTime % 10 === 0 && modal.gameDueTime < 85) {\n        this.fireSuperStar();\n      }\n      if (modal.gameDueTime === 30) {\n        modal.fireBallTime = 2;\n      }\n      if (modal.gameDueTime === 50) {\n        this.fireBoss1();\n      }\n      if (modal.gameDueTime === 60) {\n        modal.fireBallTime = 1;\n      }\n      if (modal.gameDueTime === 82) {\n        this.fireBoss2();\n      }\n      if (modal.gameDueTime === uiConfig.gameTime) {\n        this.tweens.add({\n          targets: this.bgTop,\n          duration: 1000,\n          y: 0\n        });\n        this.createGoal();\n        this.endGame();\n      }\n      this.checkGameTime();\n    }\n  }\n  checkBecomeSuperTimer() {\n    if (this.becomeSuperTimer.getRepeatCount() === 0) {\n      this.duck.anims.stop();\n      this.duck.play(\"swim\");\n      modal.isSuperDuck = false;\n      modal.duckMoveSpeed = 150;\n    }\n  }\n  createTimeBoxCon() {\n    this.timeBox = this.add.graphics();\n    this.timeBox.fillStyle(0x535353);\n    this.timeBox.fillRoundedRect(\n      0,\n      10,\n      uiConfig.gridColWidth * 3,\n      uiConfig.gridColHeight,\n      30\n    );\n    this.timeBox.fillStyle(0x000000);\n    this.timeBox.fillRoundedRect(\n      0,\n      0,\n      uiConfig.gridColWidth * 3,\n      uiConfig.gridColHeight,\n      30\n    );\n    this.subTimeText = this.add.text(uiConfig.gridColWidth / 2, 40, \"TIME\", {\n      fontFamily: uiConfig.fontFamily,\n      fontSize: 20\n    });\n    this.timeText = this.add.text(\n      uiConfig.gridColWidth + uiConfig.gridColWidth / 2,\n      uiConfig.gridColHeight - 50,\n      \"01:30\", {\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 60\n      }\n    );\n    this.timeText.setOrigin(0.5);\n    this.timeBoxCon = this.add.container();\n    this.timeBoxCon.add(this.timeBox);\n    this.timeBoxCon.add(this.subTimeText);\n    this.timeBoxCon.add(this.timeText);\n    this.timeBoxCon.x = uiConfig.gridColWidth * 13;\n    this.timeBoxCon.y = -20;\n  }\n  createGoal() {\n    this.goal = this.add.image(0, 0, \"goal\");\n    alignGrid.placeAt(8, 1, this.goal);\n    this.goal.setScale(0);\n    this.goal.opacity = 0;\n    this.tweens.add({\n      targets: this.goal,\n      duration: 1000,\n      delay: 1000,\n      scale: 1,\n      opacity: 1\n    });\n  }\n  endGame() {\n    if (modal.isPlay) {\n      this.tweens.add({\n        targets: this.duck,\n        duration: 1500,\n        delay: 2000,\n        x: 650,\n        y: 370\n      });\n      setTimeout(() => {\n        this.gameOverScreen = new GameOverScreen({\n          scene: this,\n          x: game.config.width / 2,\n          y: game.config.height / 2,\n          title: \"Congratulations! 恭喜過關!\",\n          btnText: \"再來一次..\",\n          gameSuccess: true\n        });\n        for (let i = 1; i <= 3; i++) {\n          this.tweens.add({\n            targets: this.gameOverScreen[`clear${i}`],\n            duration: 1500,\n            delay: i * 500,\n            alpha: 1\n          });\n        }\n      }, 4200);\n    }\n  }\n  fireBall() {\n    let amount = Math.floor(Math.random() * 3 + 1);\n    for (let i = 0; i < amount; i++) {\n      let ball = this.ballGroup.getFirstDead(false);\n      if (!ball) {\n        ball = this.ballGroup.create(0, 0, \"ballSprite\");\n      }\n      alignGrid.placeAt(getRandomColumn(3, 10), 0, ball);\n      ball.y = -ball.height;\n      ball.setSize(90, 90);\n      ball.setScale(0.7);\n      ball.setCollideWorldBounds(true);\n      ball.setFrame(Math.floor(Math.random() * 4));\n      ball.setActive(true);\n      ball.setVisible(true);\n      ball.setVelocityY(modal.objSpeed);\n      if (modal.gameDueTime > 60) {\n        const randomDirection = Math.random() < 0.5;\n        ball.setVelocityX(randomDirection ? modal.objSpeed / 2 : -modal.objSpeed / 2);\n        ball.setBounceX(0.5);\n      }\n    }\n  }\n  fireBoss1() {\n    this.boss1 = this.physics.add.sprite(0, 0, \"boss1\");\n    alignGrid.placeAt(getRandomColumn(4, 7), 0, this.boss1);\n    this.boss1.y = -this.boss1.height;\n    this.boss1.setSize(350, 250);\n    this.boss1.setActive(true);\n    this.boss1.setVisible(true);\n    this.boss1.setCollideWorldBounds(true);\n    this.boss1.setVelocityY(modal.objSpeed * 0.8);\n  }\n  fireBoss2() {\n    this.boss2 = this.physics.add.sprite(0, 0, \"boss2\");\n    alignGrid.placeAt(getRandomColumn(5, 5), 0, this.boss2);\n    this.boss2.y = -this.boss2.height;\n    this.boss2.setSize(550, 300);\n    this.boss2.setScale(0.9);\n    this.boss2.setActive(true);\n    this.boss2.setVisible(true);\n    this.boss2.setCollideWorldBounds(true);\n    this.boss2.setVelocityY(modal.objSpeed * 0.8);\n  }\n  fireSuperStar() {\n    let superStar = this.superStarGroup.getFirstDead(false);\n    if (!superStar) {\n      superStar = this.superStarGroup.create(0, 0, \"superStar\");\n    }\n    alignGrid.placeAt(getRandomColumn(3, 10), 0, superStar);\n    superStar.y = -superStar.height;\n    superStar.setSize(70, 70);\n    superStar.setActive(true);\n    superStar.setVisible(true);\n    superStar.setVelocityY(modal.objSpeed * 0.6);\n  }\n  hitTheBall(duck, ball) {\n    if (modal.isPlay) {\n      modal.isPlay = false;\n      this.ballGroup.setVelocityY(0);\n      this.superStarGroup.setVelocityY(0);\n      if (this.boss1 && this.boss1.body) {\n        this.boss1.setVelocityY(0);\n      }\n      if (this.boss2 && this.boss2.body) {\n        this.boss2.setVelocityY(0);\n      }\n      this.duck.anims.stop();\n      this.duck.setFrame(6);\n      duck.body.velocity.x = 0;\n      this.gameOverScreen = new GameOverScreen({\n        scene: this,\n        x: game.config.width / 2,\n        y: game.config.height / 2,\n        title: \"UH-OH! 觸礁了\",\n        subTitle: \"勝敗乃鴨家常事，大俠重新來過吧~\",\n        btnText: \"重新挑戰\",\n        gameSuccess: false\n      });\n    }\n  }\n  hitTheBoss(duck, boss) {\n    if (modal.isPlay) {\n      modal.isPlay = false;\n      boss.setVelocityY(0);\n      this.ballGroup.setVelocityY(0);\n      this.superStarGroup.setVelocityY(0);\n      this.duck.anims.stop();\n      this.duck.setFrame(6);\n      duck.body.velocity.x = 0;\n      this.gameOverScreen = new GameOverScreen({\n        scene: this,\n        x: game.config.width / 2,\n        y: game.config.height / 2,\n        title: \"UH-OH! 觸礁了\",\n        subTitle: \"勝敗乃鴨家常事，大俠重新來過吧~\",\n        btnText: \"重新挑戰\",\n        gameSuccess: false\n      });\n    }\n  }\n  hitTheSuperStar(duck, star) {\n    if (modal.isPlay) {\n      this.duck.anims.stop();\n      this.duck.play(\"rush\");\n      modal.duckMoveSpeed = 300;\n      modal.isSuperDuck = true;\n      this.killSprite(\"ballGroup\");\n      this.killSprite(\"superStarGroup\");\n      if (this.boss1) {\n        this.tweens.add({\n          targets: this.boss1,\n          duration: 500,\n          alpha: 0,\n          onComplete: () => {\n            this.boss1.body = null;\n            this.boss1.destroy();\n          }\n        });\n      }\n      if (this.boss2) {\n        this.tweens.add({\n          targets: this.boss2,\n          duration: 500,\n          alpha: 0,\n          onComplete: () => {\n            this.boss2.body = null;\n            this.boss2.destroy();\n          }\n        });\n      }\n      this.becomeSuperTimer = this.time.addEvent({\n        delay: 1000,\n        callback: this.checkBecomeSuperTimer,\n        callbackScope: this,\n        repeat: 3\n      });\n    }\n  }\n  killSprite(groupName) {\n    this[groupName].getChildren().map(child => child.destroy());\n  }\n}\n\n// btn class\nclass FlatButton extends Phaser.GameObjects.Container {\n  constructor(config) {\n    if (!config.scene) {\n      return;\n    }\n    super(config.scene);\n    this.scene = config.scene;\n    this.config = config;\n    this.btn = this.scene.add.sprite(0, 0, config.key);\n    this.add(this.btn);\n    if (config.text) {\n      this.text = this.scene.add.text(0, 0, config.text, {\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 30\n      });\n      this.text.setOrigin(0.5);\n      this.add(this.text);\n    }\n    if (config.x) {\n      this.x = config.x;\n    }\n    if (config.y) {\n      this.y = config.y;\n    }\n    if (config.event) {\n      this.btn.setInteractive({\n        cursor: \"pointer\"\n      });\n      this.btn.on(\"pointerdown\", this.onPointerdown, this);\n      this.btn.on(\"pointerup\", this.onPointerup, this);\n    }\n    this.scene.add.existing(this);\n  }\n  onPointerdown() {\n    this.btn.setFrame(1);\n    this.y += 5;\n  }\n  onPointerup() {\n    this.btn.setFrame(0);\n    this.y -= 5;\n    emitter.emit(this.config.event);\n  }\n}\n\n// wall class\nclass Wall extends Phaser.GameObjects.Container {\n  constructor(config) {\n    if (!config.scene) {\n      return;\n    }\n    super(config.scene);\n    this.scene = config.scene;\n    this.config = config;\n    this.wall = this.scene.add.image(0, 0, config.key);\n    this.graphics = this.scene.add.graphics();\n    this.graphics.fillStyle(0x000000);\n    this.graphics.fillRect(\n      -game.config.width,\n      0,\n      game.config.width + game.config.width / 2,\n      121\n    );\n    this.add(this.graphics);\n    this.add(this.wall);\n    if (config.x) {\n      this.x = config.x;\n    }\n    if (config.y) {\n      this.y = config.y;\n    }\n    if (config.origin) {\n      const {\n        x,\n        y\n      } = config.origin;\n      this.wall.setOrigin(x, y);\n    }\n    this.scene.add.existing(this);\n  }\n  onPointerdown() {\n    this.btn.setFrame(1);\n    this.y += 5;\n  }\n  onPointerup() {\n    this.btn.setFrame(0);\n    emitter.emit(this.config.event);\n  }\n}\n\n// gameOver class\nclass GameOverScreen extends Phaser.GameObjects.Container {\n  constructor(config) {\n    if (!config.scene) {\n      return;\n    }\n    super(config.scene);\n    this.scene = config.scene;\n    this.config = config;\n    this.graphics = this.scene.add.graphics();\n    this.graphics.fillStyle(0x000000, 0.5);\n    this.graphics.fillRect(\n      -game.config.width / 2,\n      -game.config.height / 2,\n      game.config.width,\n      game.config.height\n    );\n    this.graphics.fillStyle(0xffffff);\n    this.graphics.fillRoundedRect(\n      0 - uiConfig.gridColWidth * 4,\n      0 - uiConfig.gridColHeight,\n      uiConfig.gridColWidth * 8,\n      uiConfig.gridColHeight * 2,\n      30\n    );\n    this.add(this.graphics);\n    if (config.gameSuccess) {\n      this.title = this.scene.add.text(0, -110, config.title, {\n        color: \"#ff952b\",\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 36\n      });\n    } else {\n      this.title = this.scene.add.text(0, -60, config.title, {\n        color: \"#ff952b\",\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 36\n      });\n    }\n    this.title.setOrigin(0.5);\n    this.add(this.title);\n    if (config.gameSuccess) {\n      this.clear1 = this.scene.add.sprite(-200, 0, \"clearSprite\", 0);\n      this.clear2 = this.scene.add.sprite(0, 0, \"clearSprite\", 1);\n      this.clear3 = this.scene.add.sprite(200, 0, \"clearSprite\", 2);\n      this.clear1.alpha = 0;\n      this.clear2.alpha = 0;\n      this.clear3.alpha = 0;\n      this.add(this.clear1);\n      this.add(this.clear2);\n      this.add(this.clear3);\n    } else {\n      this.subTitle = this.scene.add.text(0, -10, config.subTitle, {\n        color: \"#707070\",\n        fontFamily: uiConfig.fontFamily,\n        fontSize: 20\n      });\n      this.subTitle.setOrigin(0.5);\n      this.add(this.subTitle);\n    }\n    if (config.gameSuccess) {\n      this.btnRestart = new FlatButton({\n        scene: config.scene,\n        key: \"btnStart\",\n        text: config.btnText,\n        x: 0,\n        y: 110,\n        event: \"restartGame\"\n      });\n    } else {\n      this.btnRestart = new FlatButton({\n        scene: config.scene,\n        key: \"btnStart\",\n        text: config.btnText,\n        x: 0,\n        y: 50,\n        event: \"restartGame\"\n      });\n    }\n    this.add(this.btnRestart);\n    if (config.x) {\n      this.x = config.x;\n    }\n    if (config.y) {\n      this.y = config.y;\n    }\n    this.scene.add.existing(this);\n  }\n  onPointerdown() {\n    this.btn.setFrame(1);\n    this.y += 5;\n  }\n  onPointerup() {\n    this.btn.setFrame(0);\n    emitter.emit(this.config.event);\n  }\n}\n\n// gridSystem\nclass AlignGrid {\n  constructor(config) {\n    if (!config.scene) {\n      return;\n    }\n    this.config = config;\n    this.config.row = config.rows || 6;\n    this.config.cols = config.cols || 5;\n    this.config.width = config.width || game.config.width;\n    this.config.height = config.height || game.config.height;\n\n    this.scene = config.scene;\n    this.cw = this.config.width / this.config.cols;\n    this.ch = this.config.height / this.config.rows;\n  }\n  show() {\n    this.graphics = this.scene.add.graphics();\n    this.graphics.lineStyle(2, 0x00ff00);\n    for (let i = 0; i < this.config.width; i += this.cw) {\n      this.graphics.moveTo(i, 0);\n      this.graphics.lineTo(i, this.config.height);\n    }\n    for (let i = 0; i < this.config.height; i += this.ch) {\n      this.graphics.moveTo(0, i);\n      this.graphics.lineTo(this.config.width, i);\n    }\n    this.graphics.strokePath();\n  }\n  placeAt(xx, yy, obj) {\n    obj.x = this.cw * xx + this.cw / 2;\n    obj.y = this.ch * yy + this.ch / 2;\n  }\n  placeAtIndex(index, obj) {\n    // 另一種指定位置的方式，以格數來指定\n    var xx = index % this.cols;\n    var yy = Math.floor(index / this.cols);\n    this.placeAt(xx, yy, obj);\n  }\n  showNumbers() {\n    // 在每一格中呈現當前的 index 數字\n    this.show();\n    var count = 0;\n    for (var i = 0; i < this.config.rows; i++) {\n      for (var j = 0; j < this.config.cols; j++) {\n        var numText = this.scene.add.text(0, 0, count, \"#00ff00\");\n        numText.setOrigin(0.5, 0.5);\n        this.placeAtIndex(count, numText);\n        count++;\n      }\n    }\n  }\n}\n\nfunction getRandomColumn(min, max) {\n  return Math.floor(Math.random() * max) + min;\n}"]}