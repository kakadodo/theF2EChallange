"use strict";var vm=new Vue({el:"#app",data:{gameTime:6e4,timer:null,isPlaying:!1,showModal:!0,panelCode:{options:1,success:2,fail:3},currentPanel:0,deckHolder:[0,0,0,0],deckDone:[[1],[14],[27],[40]],deckUnorder:[[],[],[],[],[],[],[],[]],ignoreCardId:[1,14,27,40],ondragCardId:null,ondragDeckName:null,ondragDeckIndex:null,ondropDeckName:null,ondropDeckIndex:null,returnSteps:[]},computed:{displayTime:function(){var e=Math.floor(this.gameTime/1e3/60).toString().padStart(2,0);return e+":"+Math.floor((this.gameTime-60*e*1e3)/1e3).toString().padStart(2,0)}},methods:{shuffle:function(e){for(var n=e.length-1;0<=n;n--){var t=Math.floor(Math.random()*(n+1)),r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e},generateRandomCards:function(){var e=Array.from(new Array(52)).map(function(e,n){return n+1}),t=this.shuffle(e);this.ignoreCardId.forEach(function(e,n){-1!==t.indexOf(e)&&t.splice(t.indexOf(e),1)});for(var n=0;n<this.deckUnorder.length;n++)for(var r=0;r<6;r++)this.deckUnorder[n].push(t.shift())},findCardPattern:function(e){switch(Math.ceil(e/13)){case 1:return"heart";case 2:return"club";case 3:return"spade";case 4:return"diamond";default:return}},displayCardParttern:function(e,n){var t=e%13;return 0===t&&(t=13),"./img/2nd-week2/"+this.findCardPattern(e)+"-"+t+".png"},ondragStart:function(e,n,t){this.ondropDeckName=null,this.ondropDeckIndex=null,this.ondragCardId=e,this.ondragDeckIndex=n,this.ondragDeckName=t},ondragEnter:function(e,n,t){e.preventDefault(),this.ondropDeckName=t,this.ondropDeckIndex=n},ondragEnd:function(e,n,t){if(e.preventDefault(),"deckHolder"===this.ondropDeckName){if(0!==this.deckHolder[this.ondropDeckIndex])return;this.deckHolder.splice(this.ondropDeckIndex,1,this.ondragCardId),this.deckUnorder[this.ondragDeckIndex].pop()}else if("deckDone"===this.ondropDeckName){var r=this.deckDone[this.ondropDeckIndex],a=r[r.length-1];if(this.ondragCardId!==a+1)return;r.push(this.ondragCardId),"deckHolder"===this.ondragDeckName?this[this.ondragDeckName].pop():this[this.ondragDeckName][this.ondragDeckIndex].pop()}else if("deckUnorder"===this.ondropDeckName){var d=this.deckUnorder[this.ondropDeckIndex],i=d[d.length-1],o=this.deckUnorder[this.ondragDeckIndex],s=Math.ceil(this.ondragCardId/13),c=Math.ceil(i/13),h=this.ondragCardId%13==i%13-1||this.ondragCardId%13==i%13+12;s+c!==5&&s!==c&&h&&(d.push(this.ondragCardId),o.pop())}this.returnSteps.push({ondragCardId:this.ondragCardId,ondragDeckName:this.ondragDeckName,ondragDeckIndex:this.ondragDeckIndex,ondropDeckName:this.ondropDeckName,ondropDeckIndex:this.ondropDeckIndex})},startGame:function(){this.switchPanel({isPlaying:!0,showModal:!1}),this.countTime()},pauseGame:function(){this.switchPanel({isPlaying:!1,showModal:!0,currentPanel:this.panelCode.options})},continueGame:function(){this.switchPanel({isPlaying:!0,showModal:!1})},restartGame:function(){var e=this;this.resetAllData(),setTimeout(function(){e.generateRandomCards()},400),this.countTime(),this.showModal=!1,this.isPlaying=!0},resetAllData:function(){this.gameTime=18e5,this.deckHolder=[0,0,0,0],this.deckDone=[[1],[14],[27],[40]],this.deckUnorder=[[],[],[],[],[],[],[],[]],this.ondragCardId=null,this.ondragDeckIndex=null,this.ondropDeckName=null,this.ondropDeckIndex=null,this.returnSteps=[],clearInterval(this.timer),this.timer=null},returnGameSteps:function(){if(0===this.returnSteps.length)alert("No more step return.");else{var e=this.returnSteps.pop();"deckHolder"===e.ondragDeckName?this[e.ondragDeckName].splice(e.ondragDeckIndex,1,e[ondragCardId]):this[e.ondragDeckName][e.ondragDeckIndex].push(e.ondragCardId),"deckHolder"===e.ondropDeckName?this[e.ondropDeckName].splice(e.ondropDeckIndex,1,0):this[e.ondropDeckName][e.ondropDeckIndex].pop()}},countTime:function(){var e=this;this.timer=setInterval(function(){if(e.gameTime<=0)return e.switchPanel({isPlaying:!1,showModal:!0,currentPanel:e.panelCode.fail}),void clearInterval(e.timer);e.isPlaying&&(e.gameTime-=1e3)},1e3)},switchPanel:function(e){this.currentPanel=e.currentPanel||0,this.isPlaying=e.isPlaying,this.showModal=e.showModal},aniCardEnter:function(n){var e=100*n.dataset.index;n.style.animationDelay=e/1e3+"s",n.classList.add("animated","fadeInUp"),n.addEventListener("animationend",function e(){n.classList.remove("animated","fadeInUp"),n.removeEventListener("animationend",e)})}},created:function(){this.generateRandomCards()}});
//# sourceMappingURL=free-cell.js.map
