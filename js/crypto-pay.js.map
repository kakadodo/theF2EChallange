{"version":3,"sources":["crypto-pay.js"],"names":["vm","formProfile","name","mobile","email","date","nop","adult","child","code","comment","agree","formPayment","cardNumber","cardNumberInput","expiredMonth","expiredYear","cvv","$","Vue","use","VeeValidate","classes","classNames","valid","invalid","el","data","progress","steps","currentStep","profile","payby","payment","formPayby","hideOrder","isMobile","computed","methods","validateBeforeSubmit","stepName","$validator","validateAll","then","console","log","result","removeClass","addClass","setTimeout","resetForm","formName","JSON","parse","stringify","reset","checkCardNumberInput","number","index","length","$refs","focus","resetAllStep","key","initFormData","formatCreditNumber","e","val","target","value","replace","valArr","split","temp","map","i","push","join","created","extend","validate","mounted","timer","window","on","width","clearTimeout","animate","top","scrollTop","attr"],"mappings":"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","file":"crypto-pay.js","sourcesContent":["let vm = null;\r\nconst formProfile = {\r\n  name: null,\r\n  mobile: null,\r\n  email: null,\r\n  date: \"2019/08/09\",\r\n  nop: {\r\n    adult: 0,\r\n    child: 0\r\n  },\r\n  code: null,\r\n  comment: null,\r\n  agree: false\r\n};\r\nconst formPayment = {\r\n  name: null,\r\n  cardNumber: [\"\", \"\", \"\", \"\"],\r\n  cardNumberInput: null,\r\n  expiredMonth: null,\r\n  expiredYear: null,\r\n  cvv: null\r\n};\r\n\r\n$(function() {\r\n  // 表單驗證 plugin\r\n  Vue.use(VeeValidate, {\r\n    classes: true,\r\n    classNames: {\r\n      valid: \"is-valid\",\r\n      invalid: \"is-invalid\"\r\n    }\r\n  });\r\n  vm = new Vue({\r\n    el: \"#app\",\r\n    data: {\r\n      progress: {\r\n        steps: [\"profile\", \"payby\", \"payment\"],\r\n        currentStep: 0,\r\n        profile: false,\r\n        payby: false,\r\n        payment: false\r\n      },\r\n      payby: [\"超商代碼 7-11\", \"ATM轉帳\", \"街口支付\", \"信用卡\", \"LINE Pay\"],\r\n      formProfile: null,\r\n      formPayby: null,\r\n      formPayment: null,\r\n      hideOrder: true,\r\n      isMobile: false\r\n    },\r\n    computed: {},\r\n    methods: {\r\n      validateBeforeSubmit(stepName) {\r\n        this.$validator.validateAll().then(result => {\r\n          console.log(\"work\");\r\n          console.log(result);\r\n          if (result) {\r\n            this.progress[stepName] = true;\r\n            this.progress.currentStep++;\r\n            return;\r\n          }\r\n          if (stepName === \"payby\") {\r\n            $(\".alert_payby\")\r\n              .removeClass(\"hide\")\r\n              .addClass(\"show\");\r\n            setTimeout(() => {\r\n              $(\".alert_payby\")\r\n                .removeClass(\"show\")\r\n                .addClass(\"hide\");\r\n            }, 2000);\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        switch (formName) {\r\n          case \"formProfile\":\r\n            this.formProfile = JSON.parse(JSON.stringify(formProfile));\r\n            this.$validator.reset();\r\n            return;\r\n          case \"formPayby\":\r\n            this.formPayby = null;\r\n            this.progress.profile = false;\r\n            this.progress.currentStep--;\r\n            return;\r\n          case \"formPayment\":\r\n            this.formPayment = JSON.parse(JSON.stringify(formPayment));\r\n            this.progress.payby = false;\r\n            this.progress.currentStep--;\r\n            return;\r\n          default:\r\n            return;\r\n        }\r\n      },\r\n      checkCardNumberInput(number, index) {\r\n        if (number.length === 4 && index < 3) {\r\n          this.$refs.cardNumber[index + 1].focus();\r\n        }\r\n      },\r\n      resetAllStep() {\r\n        console.log(\"work\");\r\n        for (let key in this.progress) {\r\n          if (key === \"steps\") continue;\r\n          if (key === \"currentStep\") {\r\n            this.progress[key] = 0;\r\n            continue;\r\n          }\r\n          this.progress[key] = false;\r\n        }\r\n        this.initFormData();\r\n      },\r\n      initFormData() {\r\n        this.formProfile = JSON.parse(JSON.stringify(formProfile));\r\n        this.formPayby = null;\r\n        this.formPayment = JSON.parse(JSON.stringify(formPayment));\r\n      },\r\n      formatCreditNumber(e) {\r\n        let val = e.target.value.replace(/-/g, \"\");\r\n        let valArr = val.split(\"\");\r\n        let temp = [];\r\n        valArr.map((val, i) => {\r\n          temp.push(val);\r\n          if ((i + 1) % 4 === 0 && temp.length < 19) {\r\n            temp.push(\"-\");\r\n          }\r\n        });\r\n        this.formPayment.cardNumberInput = temp.join(\"\");\r\n      }\r\n    },\r\n    created() {\r\n      // 參加人數的客製化驗證\r\n      this.$validator.extend(\"nop\", {\r\n        validate: () => {\r\n          return this.formProfile.nop.adult + this.formProfile.nop.child > 0;\r\n        }\r\n      });\r\n      this.initFormData();\r\n    },\r\n    mounted() {\r\n      let timer = null;\r\n      $(window).on(\"scroll\", () => {\r\n        if ($(window).width() <= 767) {\r\n          clearTimeout(timer);\r\n          timer = setTimeout(() => {\r\n            $(\".popup_wrapper\").animate(\r\n              {\r\n                top: $(window).scrollTop()\r\n              },\r\n              300\r\n            );\r\n          }, 100);\r\n        } else {\r\n          $(\".popup_wrapper\").attr(\"style\", \"\");\r\n        }\r\n      });\r\n      $(window).on(\"resize\", () => {\r\n        this.isMobile = $(window).width() <= 575 ? true : false;\r\n      });\r\n    }\r\n  });\r\n});\r\n"]}