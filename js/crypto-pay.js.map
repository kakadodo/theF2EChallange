{"version":3,"sources":["crypto-pay.js"],"names":["vm","formProfile","name","mobile","email","date","nop","adult","child","code","comment","agree","formPayment","cardNumber","cardNumberInput","expiredMonth","expiredYear","cvv","$","Vue","use","VeeValidate","classes","classNames","valid","invalid","el","data","progress","steps","currentStep","profile","payby","payment","formPayby","hideOrder","isMobile","computed","methods","validateBeforeSubmit","stepName","$validator","validateAll","then","result","console","log","removeClass","addClass","setTimeout","resetForm","formName","JSON","parse","stringify","reset","checkCardNumberInput","number","index","length","$refs","focus","resetAllStep","key","initFormData","formatCreditNumber","e","val","target","value","replace","valArr","split","temp","map","i","push","join","created","extend","validate","mounted","timer","window","on","width","clearTimeout","animate","top","scrollTop","attr"],"mappings":"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","file":"crypto-pay.js","sourcesContent":["let vm = null;\nconst formProfile = {\n  name: null,\n  mobile: null,\n  email: null,\n  date: '2019/08/09',\n  nop: {\n    adult: 0,\n    child: 0,\n  },\n  code: null,\n  comment: null,\n  agree: false,\n};\nconst formPayment = {\n  name: null,\n  cardNumber: ['', '', '', ''],\n  cardNumberInput: null,\n  expiredMonth: null,\n  expiredYear: null,\n  cvv: null,\n};\n\n$(function() {\n  // 表單驗證 plugin\n  Vue.use(VeeValidate, {\n    classes: true,\n    classNames: {\n      valid: 'is-valid',\n      invalid: 'is-invalid',\n    }\n  });\n  vm = new Vue({\n    el: '#app',\n    data: {\n      progress: {\n        steps: ['profile', 'payby', 'payment'],\n        currentStep: 2,\n        profile: false,\n        payby: false,\n        payment: false,\n      },\n      payby: ['超商代碼 7-11', 'ATM轉帳', '街口支付', '信用卡', 'LINE Pay'],\n      formProfile: null,\n      formPayby: null,\n      formPayment: null,\n      hideOrder: true,\n      isMobile: false,\n    },\n    computed: {\n    },\n    methods: {\n      validateBeforeSubmit(stepName) {\n        this.$validator.validateAll().then((result) => {\n          console.log('work');\n          console.log(result);\n          if (result) {\n            this.progress[stepName] = true;\n            this.progress.currentStep++;\n            return;\n          }\n          if (stepName === 'payby') {\n            $('.alert_payby').removeClass('hide').addClass('show');\n            setTimeout(() => {\n              $('.alert_payby').removeClass('show').addClass('hide');\n            }, 2000);\n          }\n        });\n      },\n      resetForm(formName) {\n        switch(formName) {\n          case 'formProfile':\n            this.formProfile = JSON.parse(JSON.stringify(formProfile));\n            this.$validator.reset();\n            return;\n          case 'formPayby':\n            this.formPayby = null;\n            this.progress.profile = false;\n            this.progress.currentStep--;\n            return;\n          case 'formPayment':\n            this.formPayment = JSON.parse(JSON.stringify(formPayment));\n            this.progress.payby = false;\n            this.progress.currentStep--;\n            return;\n          default:\n            return;\n        }\n      },\n      checkCardNumberInput(number, index) {\n        if (number.length===4 && index<3) {\n          this.$refs.cardNumber[index+1].focus();\n        }\n      },\n      resetAllStep() {\n        console.log('work');\n        for (let key in this.progress) {\n          if (key === 'steps') continue;\n          if (key === 'currentStep') {\n            this.progress[key] = 0;\n            continue;\n          }\n          this.progress[key] = false;\n        }\n        this.initFormData();\n      },\n      initFormData() {\n        this.formProfile = JSON.parse(JSON.stringify(formProfile));\n        this.formPayby = null;\n        this.formPayment = JSON.parse(JSON.stringify(formPayment));\n      },\n      formatCreditNumber(e) {\n        let val = e.target.value.replace(/-/g, '');\n        let valArr = val.split('');\n        let temp = [];\n        valArr.map((val, i) => {\n          temp.push(val);\n          if((i + 1) % 4 === 0 && temp.length < 19) {\n            temp.push('-');\n          }\n        });\n        this.formPayment.cardNumberInput = temp.join('');\n      },\n    },\n    created() {\n      // 參加人數的客製化驗證\n      this.$validator.extend('nop', {\n        validate: () => {\n          return this.formProfile.nop.adult + this.formProfile.nop.child > 0;\n        }\n      });\n      this.initFormData();\n    },\n    mounted() {\n      let timer = null;\n      $(window).on('scroll', () => {\n        if ($(window).width() <= 767) {\n          clearTimeout(timer);\n          timer = setTimeout(() => {\n            $('.popup_wrapper').animate({\n              top: $(window).scrollTop(),\n            }, 300);\n          }, 100);\n        }else {\n          $('.popup_wrapper').attr('style', '');\n        }\n      });\n      $(window).on('resize', () => {\n        this.isMobile = $(window).width() <= 575 ? true : false;\n      });\n    },\n  });\n});"]}